# SFDX for Non-Scratch Orgs


### Scratch Org Based Development

If we are starting a new Project, then the recommendation is to use the "Scratch Org based Development" Model . [or] Small projects which can be easily converted into DX Format.

![image](https://user-images.githubusercontent.com/2145211/48164153-b47c4f80-e2af-11e8-91bd-c74b9c009198.png)

- Let's say we have code in the GIT Repository (For Existing Org based Development)
- Convert the existing code in the GIT Repository to SFDX Format (This can be done using the CLI)
- Understand the Features we are using to create correct Org Shape (For Scratch Orgs)
- Understanding and Scripting all the features or additional customization so that those can be applied to scratch orgs.
- Scripting sample data which needed to be pushed to scratch orgs for development
- CLI Provides commands such as "force:source:pull" and "force:source:push"

### Change-Set Based Development

![image](https://user-images.githubusercontent.com/2145211/48164994-3b322c00-e2b2-11e8-878c-31cbe6c847d7.png)

- Each Dev Org can be assigned to each developer. Easy to refresh from Production.
- Most common defined model.


### Using SFDX CLI for Change-set Based Development

### Difference between SFDX Format from Traditional Format

- Static Resources are uncompressed in DX, so that we can edit it
- Lightning Bundles and components must reside in a directory named "Aura"
- Documents organized inside its folder directory
- Object Metadata is further organized into sub-directories
  - businessProcess
  - compactLayouts
  - fields
  - fieldSets
  - listViews
  - recordTypes
  - sharingReasons
  - ValidationRules
  - webLinks

![image](https://user-images.githubusercontent.com/2145211/48174775-5a8f8000-e2d7-11e8-9212-ff90cf564151.png)

### Winter '19 Salesforce Source Commands (Retrieve, Deploy and Delete)

### Retrieve Commands

```
sfdx force:source:retrieve -x path/to/package.xml
```
  Ability to retrieve the source code from the non-scratch org using Package.xml
  
```
sfdx force:source:retrieve -m CustomObject,ApexClass
```
  The other flavor is to retrive metadata based onthe comma seperated list of components.

### Deploy Commands

```
sfdx force:source:deploy -x path/to/package.xml
sfdx force:source:deploy -m ApexClass:MyApexClass
```

### Install the following tools for Salesforce Development

1. Install SalesforceDX CLI
2. Install VSCode
3. Install Salesforce Extensions for VSCode

### Other Recommended Extensions

 * Apex PMD -- Allows you to do static analysis of Apex Code
 * XML Tools -- Used to Parse XML Tools

## STEP 1: Creating a Project

For this step, lets go to the "Command Palette" 

![image](https://user-images.githubusercontent.com/2145211/48317981-9a9c7e80-e5c7-11e8-8971-14cb7c383e93.png)

Let's choose the option, "Create a Project with Manifest"

NOTE: "SFDX: Create Project" --> This is for Scratch Org based Development. This option creates projects based on Scratch Org Configuration file.

The first thing its going to ask is the Project Name. 
Next, Choose the Location of the Project where it needs to be stored.

If we are doing it in the SFDX CLI, use the following command

```
sfdx force:project:create --projectname mywork --defaultpackagedir myapp --manifest

```

The output is shown below

![image](https://user-images.githubusercontent.com/2145211/48318300-814a0100-e5cc-11e8-93e5-2a51db9e77be.png)

By doing this, we are scaffolding the project and we are going to get a default Package.xml.

![image](https://user-images.githubusercontent.com/2145211/48318062-fd424a00-e5c8-11e8-9f4e-343ea4c9795a.png)

## STEP 2: Linking the Project to a Dev Org. (Authorizing an Org)

For this, authenticate any org using SFDX CLI by using the following command

```
sfdx force:auth:web:login --setalias NonScratchDevOrg --setdefaultusername
```

![image](https://user-images.githubusercontent.com/2145211/48318419-b35c6280-e5ce-11e8-8054-42f491792b3e.png)


NOTE:
  If we receive this error, the potential issue is that we have not set the correct login URL path for Salesforce to get Authenticated
  
  ![image](https://user-images.githubusercontent.com/2145211/48318465-53b28700-e5cf-11e8-8e1d-6d44fb9c5a9f.png)
  
If we are authenticating to a Developer Org or a Production Org, we can use `login.salesforce.com`
If we are authenticating to a Sandbox Org, we can use `test.salesforce.com`

![image](https://user-images.githubusercontent.com/2145211/48318490-a68c3e80-e5cf-11e8-9fa9-f0bf55cb0091.png)


But our org may need more than the default XML generated by Salesforce Default Manifest. 

Now, there are many ways to update the Package.xml

* Add all the components to the Unmanaged Package. --> Use this to generate Package.xml
* Use the Change-sets --> This will also generate Package.xml











